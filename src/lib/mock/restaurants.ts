import type { Restaurant } from '@/types/restaurant.types'

// 목업 식당 데이터 (개발 및 테스트용)
export const MOCK_RESTAURANTS: Restaurant[] = [
  {
    id: '1',
    ownerId: 'owner-1',
    name: '맛있는 치킨',
    description: '바삭바삭 수제 치킨 전문점',
    phone: '02-1234-5678',
    address: '서울시 강남구 역삼동 123-45',
    lat: 37.5012,
    lng: 127.0396,
    categoryId: 'chicken',
    minOrderAmount: 18000,
    deliveryFee: 0,
    originalDeliveryFee: 3000,
    estimatedDeliveryTime: 35,
    businessHours: {
      mon: { open: '11:00', close: '23:00' },
      tue: { open: '11:00', close: '23:00' },
      wed: { open: '11:00', close: '23:00' },
      thu: { open: '11:00', close: '23:00' },
      fri: { open: '11:00', close: '24:00' },
      sat: { open: '11:00', close: '24:00' },
      sun: { open: '12:00', close: '22:00' },
    },
    isOpen: true,
    rating: 4.8,
    reviewCount: 1523,
    imageUrl: null,
    isAdvertised: true,
    adPriority: 1,
    adExpiresAt: null,
    isNew: false,
    hasDiscount: true,
    discountAmount: 3000,
    canPickup: true,
    createdAt: '2024-01-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
  },
  {
    id: '2',
    ownerId: 'owner-2',
    name: '황금피자',
    description: '정통 이탈리안 화덕피자',
    phone: '02-2345-6789',
    address: '서울시 강남구 삼성동 456-78',
    lat: 37.5087,
    lng: 127.0632,
    categoryId: 'pizza',
    minOrderAmount: 20000,
    deliveryFee: 2000,
    estimatedDeliveryTime: 40,
    businessHours: null,
    isOpen: true,
    rating: 4.6,
    reviewCount: 892,
    imageUrl: null,
    isAdvertised: false,
    adPriority: 0,
    adExpiresAt: null,
    isNew: true,
    hasDiscount: false,
    canPickup: false,
    createdAt: '2024-06-01T00:00:00Z',
    updatedAt: '2024-06-01T00:00:00Z',
  },
  {
    id: '3',
    ownerId: 'owner-3',
    name: '한우명가',
    description: '프리미엄 한우 전문점',
    phone: '02-3456-7890',
    address: '서울시 서초구 서초동 789-12',
    lat: 37.4837,
    lng: 127.0324,
    categoryId: 'korean',
    minOrderAmount: 30000,
    deliveryFee: 0,
    originalDeliveryFee: 4000,
    estimatedDeliveryTime: 50,
    businessHours: null,
    isOpen: true,
    rating: 4.9,
    reviewCount: 2341,
    imageUrl: null,
    isAdvertised: true,
    adPriority: 2,
    adExpiresAt: null,
    isNew: false,
    hasDiscount: true,
    discountAmount: 5000,
    canPickup: true,
    createdAt: '2023-06-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
  },
  {
    id: '4',
    ownerId: 'owner-4',
    name: '짬뽕대왕',
    description: '얼큰한 해물짬뽕 전문',
    phone: '02-4567-8901',
    address: '서울시 강남구 대치동 234-56',
    lat: 37.4982,
    lng: 127.0562,
    categoryId: 'chinese',
    minOrderAmount: 15000,
    deliveryFee: 1500,
    estimatedDeliveryTime: 30,
    businessHours: null,
    isOpen: true,
    rating: 4.5,
    reviewCount: 567,
    imageUrl: null,
    isAdvertised: false,
    adPriority: 0,
    adExpiresAt: null,
    isNew: false,
    hasDiscount: false,
    canPickup: false,
    createdAt: '2023-12-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
  },
  {
    id: '5',
    ownerId: 'owner-5',
    name: '스시오마카세',
    description: '신선한 회와 초밥',
    phone: '02-5678-9012',
    address: '서울시 강남구 청담동 345-67',
    lat: 37.5195,
    lng: 127.0472,
    categoryId: 'japanese',
    minOrderAmount: 25000,
    deliveryFee: 3000,
    estimatedDeliveryTime: 45,
    businessHours: null,
    isOpen: false,
    rating: 4.7,
    reviewCount: 1234,
    imageUrl: null,
    isAdvertised: false,
    adPriority: 0,
    adExpiresAt: null,
    isNew: false,
    hasDiscount: false,
    canPickup: true,
    createdAt: '2023-09-01T00:00:00Z',
    updatedAt: '2024-01-01T00:00:00Z',
  },
  {
    id: '6',
    ownerId: 'owner-6',
    name: '프레시버거',
    description: '수제 프리미엄 버거',
    phone: '02-6789-0123',
    address: '서울시 강남구 신사동 456-78',
    lat: 37.5242,
    lng: 127.0231,
    categoryId: 'burger',
    minOrderAmount: 12000,
    deliveryFee: 0,
    originalDeliveryFee: 2500,
    estimatedDeliveryTime: 25,
    businessHours: null,
    isOpen: true,
    rating: 4.4,
    reviewCount: 789,
    imageUrl: null,
    isAdvertised: true,
    adPriority: 3,
    adExpiresAt: null,
    isNew: true,
    hasDiscount: true,
    discountAmount: 2000,
    canPickup: true,
    createdAt: '2024-05-01T00:00:00Z',
    updatedAt: '2024-06-01T00:00:00Z',
  },
]

// 카테고리별 필터링
export function getRestaurantsByCategory(categoryId: string): Restaurant[] {
  return MOCK_RESTAURANTS.filter((r) => r.categoryId === categoryId)
}

// 추천 식당 (광고 우선 정렬)
export function getRecommendedRestaurants(): Restaurant[] {
  return [...MOCK_RESTAURANTS]
    .filter((r) => r.isOpen)
    .sort((a, b) => {
      // 광고 우선
      if (a.isAdvertised && !b.isAdvertised) return -1
      if (!a.isAdvertised && b.isAdvertised) return 1
      // 광고 우선순위
      if (a.adPriority !== b.adPriority) return a.adPriority - b.adPriority
      // 평점순
      return b.rating - a.rating
    })
}

// 인기 식당 (리뷰 수 기준)
export function getPopularRestaurants(): Restaurant[] {
  return [...MOCK_RESTAURANTS]
    .filter((r) => r.isOpen)
    .sort((a, b) => b.reviewCount - a.reviewCount)
    .slice(0, 5)
}
